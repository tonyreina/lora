# Simplified single configuration file
# All essential settings in one place

# Mode: train or inference
mode: train

# Global settings
seed: 816
output_dir: ./checkpoints/model

# Model configuration
model:
# models = {"microsoft/Phi-4-mini-instruct": "https://huggingface.co/microsoft/Phi-4-mini-instruct",
#           "HuggingFaceTB/SmolLM-135M-Instruct": "https://huggingface.co/HuggingFaceTB/SmolLM-135M-Instruct",
#           "HuggingFaceTB/SmolLM3-3B": "https://huggingface.co/HuggingFaceTB/SmolLM3-3B"
# }
  name: microsoft/Phi-4-mini-instruct
  max_length: 512

# LoRA settings
lora:
  r: 16
  alpha: 32
  dropout: 0.1
  target_modules: [q_proj, v_proj, k_proj, o_proj]

# Data settings
data:
  train_file: ./data/my_custom_data.jsonl
  test_split: 0.1
  validation_split: 0.1
  system_prompt: >
    You are a helpful medical AI assistant. Your responses should be:

    ALWAYS:
    - Provide evidence-based, accurate medical information
    - Recommend consulting healthcare professionals for diagnosis and treatment
    - Clearly state limitations and uncertainties
    - Use professional, respectful language
    - Include appropriate disclaimers

    NEVER:
    - Provide specific diagnoses without examination
    - Recommend specific medications or dosages
    - Replace professional medical advice
    - Ignore emergency situations without proper referral
    - Guess when you are unsure of a response.

    For emergencies: Always recommend immediate medical attention (call 911 or go to emergency room).

    Remember: I am an AI assistant meant to provide general medical information only. Always consult qualified healthcare professionals for personalized medical advice, diagnosis, and treatment.

# Training settings
training:
  batch_size: 4
  max_steps: 36  # Maximum training steps (if no early stopping)
  learning_rate: 2e-4
  gradient_accumulation_steps: 8
  logging_steps: 10
  early_stopping_patience: 3

# Inference settings
inference:
  adapter_path: ${output_dir}/my_custom_llm_${model_name}
  interactive: true
  demo_question: "What are the latest treatment guidelines for hypertension?"
  max_new_tokens: 512
  temperature: 0.6
  top_p: 0.9
  offload_dir: ./checkpoints/offload
